<!DOCTYPE html>
<html>

<head>
  <title>è¡¨å–®é©—è­‰å¥—ä»¶</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="images/favicon.ico" rel="shortcut icon">
  <meta charset="UTF-8">
  <script src="/javascripts/vendor.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.2.35/vue.global.min.js"></script>
</head>

<body class="bg-lighter">
  <div id="app">
    <h2>å¥—ç”¨ä¸€å€‹ç¾æˆçš„æµç¨‹</h2>
    <p>åƒè€ƒæ–‡ä»¶ï¼š<a href="https://hackmd.io/FFv0a5cBToOATP7uI5COMQ">https://hackmd.io/FFv0a5cBToOATP7uI5COMQ</a></p>

    <h3>ç¯„ä¾‹ï¼šè¼‰å…¥ VeeValidate é©—è­‰å¥—ä»¶</h3>
    <v-form @submit="onSubmit" v-slot="{ errors }">
      {{ errors }}
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <v-field id="email" name="email" type="email" class="form-control" :class="{ 'is-invalid': errors['email'] }"
          placeholder="è«‹è¼¸å…¥ Email" rules="email|required" v-model="user.email"></v-field>
        <v-error-message name="email" class="invalid-feedback"></v-error-message>
      </div>

      <div class="mb-3">
        <label for="name" class="form-label">å§“å</label>
        <v-field id="name" name="å§“å" type="text" class="form-control" placeholder="è«‹è¼¸å…¥å§“å" :rules="isName"
          :class="{ 'is-invalid': errors['å§“å'] }" v-model="user.name"></v-field>
        <v-error-message name="å§“å" class="invalid-feedback">
          <span class="text-danger" style="font-size: 14px;">{{errors.å§“å}}</span>
        </v-error-message>
      </div>

      <div class="mb-3">
        <label for="phone" class="form-label">é›»è©±</label>
        <v-field id="phone" name="é›»è©±" type="text" class="form-control" placeholder="è«‹è¼¸å…¥é›»è©±" :rules="isPhone"
          :class="{ 'is-invalid': errors['é›»è©±'] }" v-model="user.phone"></v-field>
        <v-error-message name="é›»è©±" class="invalid-feedback">
          <span class="text-danger" style="font-size: 14px;">{{errors.é›»è©±}}</span>
        </v-error-message>
      </div>

      <!-- ä¸€å®šè¦åŠ ä¸Š as="select" æ‰æœƒå‘ˆç¾ä¸‹æ‹‰é¸å–® -->
      <div class="mb-3">
        <label for="region" class="form-label">åœ°å€</label>
        <v-field id="region" name="åœ°å€" class="form-control" rules="required" as="select"
          :class="{ 'is-invalid': errors['åœ°å€'] }" v-model="user.region">
          <option value="">è«‹é¸æ“‡åœ°å€</option>
          <option value="å°åŒ—å¸‚">å°åŒ—å¸‚</option>
          <option value="é«˜é›„å¸‚">é«˜é›„å¸‚</option>
        </v-field>
        <v-error-message name="åœ°å€" class="invalid-feedback">
          <span class="text-danger" style="font-size: 14px;">{{errors.åœ°å€}}</span>
        </v-error-message>
      </div>

      <div class="mb-3">
        <label for="address" class="form-label">åœ°å€</label>
        <v-field id="address" name="åœ°å€" type="text" class="form-control" placeholder="è«‹è¼¸å…¥åœ°å€" :rules="isAddress"
          :class="{ 'is-invalid': errors['åœ°å€'] }" v-model="user.address"></v-field>
        <v-error-message name="åœ°å€" class="invalid-feedback">
          <span class="text-danger" style="font-size: 14px;">{{errors.åœ°å€}}</span>
        </v-error-message>
      </div>

      <button class="btn btn-primary" type="submit">Submit</button>
    </v-form>

  </div>
  <!-- ä¸»è¦çš„VeeValidateå¥—ä»¶ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vee-validate/4.5.8/vee-validate.min.js"></script>
  <!-- å¤šåœ‹èªç³» -->
  <script src="https://cdn.jsdelivr.net/npm/@vee-validate/i18n@4.5.8/dist/vee-validate-i18n.min.js"></script>
  <!-- ç›¸é—œè¦å‰‡ ex: email...ç­‰ -->

  <script src="https://cdn.jsdelivr.net/npm/@vee-validate/rules@4.5.8/dist/vee-validate-rules.min.js"></script>
  <script type="module">

    // è¼‰å…¥å…¨éƒ¨è¦å‰‡
    Object.keys(VeeValidateRules).forEach(rule => {
      if (rule !== 'default') {
        VeeValidate.defineRule(rule, VeeValidateRules[rule]);
      }
    });
    // è¼‰å…¥æŒ‡å®šè¦å‰‡
    // VeeValidate.defineRule('email', VeeValidateRules['email']);
    // VeeValidate.defineRule('required', VeeValidateRules['required']);

    // è®€å–å¤–éƒ¨çš„è³‡æºï¼šè¼‰å…¥å¤šåœ‹èªç³»ï¼Œé¦–å…ˆè¦æŠŠå¤–éƒ¨jsonå­˜å…¥åˆ°æœ¬åœ°ç«¯
    // https://github.com/logaretm/vee-validate/blob/vee-validate%404.1.16/packages/i18n/src/locale/zh_TW.json
    VeeValidateI18n.loadLocaleFromURL('./zh_TW.json');

    // Activate the locale
    VeeValidate.configure({
      generateMessage: VeeValidateI18n.localize('zh_TW'), // åˆ‡æ›æˆä¸­æ–‡ç‰ˆ
      validateOnInput: true, // åŸæœ¬æ˜¯ç•¶é›¢é–‹inputæ‰æœƒé€²è¡Œé©—è­‰ï¼Œç¾åœ¨èª¿æ•´ç‚ºã€Œ è¼¸å…¥æ–‡å­—æ™‚ï¼Œå°±ç«‹å³é€²è¡Œé©—è­‰ ã€
    });

    const app = Vue.createApp({
      data() {
        return {
          user: {
            email: '',
            name: '',
            address: '',
            phone: '',
            region: '',
          }
        }
      },
      methods: {
        onSubmit() {
          console.log(this.user);
        },
        isName(value) {
          const name = value;
          return name === '' ? 'è«‹è¼¸å…¥åå­—' : true
        },
        isPhone(value) {
          const phoneNumber = /^(09)[0-9]{8}$/
          return phoneNumber.test(value) ? true : 'éœ€è¦æ­£ç¢ºçš„é›»è©±è™Ÿç¢¼'
        },
        isAddress(value) {
          const address = value;
          return address === '' ? 'è«‹è¼¸å…¥åœ°å€' : true
        },
      },
      created() {
        console.log(VeeValidate);
      }
    });
    // è¨»å†Šå…ƒä»¶ï¼šä½¿ç”¨å…¨åŸŸè¨»å†Šæ–¹å¼
    app.component('VForm', VeeValidate.Form);
    app.component('VField', VeeValidate.Field);
    app.component('VErrorMessage', VeeValidate.ErrorMessage)

    app.mount('#app');
  </script>

  <!-- ğŸ™‡ğŸ™‡ç·´ç¿’çµæŸğŸ™‡ğŸ™‡ -->
  </main>


  </div>
  </div>

  <footer class="footer py-2 bg-light">
    <div class="container text-center">
      <small class="text-black-50 fw-light mb-0">å…­è§’å­¸é™¢ Vue èª²ç¨‹å°ˆå±¬æ–‡ä»¶</small>
    </div>
  </footer>
  <link rel="stylesheet" href="all.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
</body>

</html>